(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},30:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},35:function(e,t,a){e.exports=a.p+"static/media/pink_char.9f19440f.png"},39:function(e,t,a){e.exports=a(70)},44:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(29),c=a.n(r),l=(a(44),a(5)),i=a(6),s=a(8),u=a(7),p=a(9),d=(a(16),a(30)),m=a.n(d),h=a(12),g=a(10),f=a.n(g),v=a(72),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleLogin=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;f.a.post("https://lambda-adv-mud.herokuapp.com/api/login/",{username:t,password:n}).then(function(e){console.log(e),localStorage.setItem("key",e.data.key),window.location.reload()}).catch(function(e){a.setState({unAuthenticated:!0}),console.log("String Error: ".concat(e," and variable error:"),e)})},a.state={username:"",password:"",unAuthenticated:!1},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"login-page"},o.a.createElement("h1",{className:"loginTitle"},"Lambda M.U.D"),o.a.createElement("form",{className:"login"},o.a.createElement("div",null,"Username: ",o.a.createElement("input",{name:"username",placeholder:"Username",onChange:this.handleChange,value:this.state.username})),o.a.createElement("br",null),o.a.createElement("div",null,"Password: ",o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange,value:this.state.password}),o.a.createElement("br",null),o.a.createElement("input",{className:"login-button",type:"submit",value:"Log In",onClick:this.handleLogin})),this.state.unAuthenticated?o.a.createElement("p",{className:"wrong-password"},"Whoops, wrong username or password, try again"):null),o.a.createElement(v.a,{to:"/register",className:"goto-signup"},"Need an account? Click here to sign up"))}}]),t}(o.a.Component),E=function(e){return function(t){function a(e){var t;return Object(l.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).state={loggedIn:!1},t}return Object(p.a)(a,t),Object(i.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("key")&&this.setState({loggedIn:!0})}},{key:"render",value:function(){return this.state.loggedIn?o.a.createElement(e,this.props):o.a.createElement(y,null)}}]),a}(o.a.Component)},b=E(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleLogout=function(){localStorage.removeItem("key"),window.location.reload()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"Main"},o.a.createElement("div",null,o.a.createElement("img",{src:m.a,className:"Main-logo",alt:"logo"}),o.a.createElement(v.a,{className:"start-game-button",to:"/play"},"Start Game"),o.a.createElement("button",{className:"main-logout",onClick:this.handleLogout},"Logout")))}}]),t}(n.Component)),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleSignup=function(e){e.preventDefault();var t=a.state.username,n=a.state.password1,o=a.state.password2;f.a.post("https://lambda-adv-mud.herokuapp.com/api/registration/",{username:t,password1:n,password2:o}).then(function(e){localStorage.setItem("key",e.data.key),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.error}),console.error(e.response.data.error)})},a.state={username:"",password1:"",password2:"",errror:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"login-page"},o.a.createElement("h1",{className:"loginTitle"},"Lambda M.U.D"),o.a.createElement("form",{className:"login register"},o.a.createElement("div",null,"Username: ",o.a.createElement("input",{name:"username",placeholder:"Username",onChange:this.handleChange,value:this.state.username})),o.a.createElement("br",null),o.a.createElement("div",null,"Password: ",o.a.createElement("input",{type:"password",name:"password1",placeholder:"Password",onChange:this.handleChange,value:this.state.password1})),o.a.createElement("br",null),o.a.createElement("div",{id:"re"},"Re-enter"),o.a.createElement("div",null,"Password: ",o.a.createElement("input",{type:"password",name:"password2",placeholder:"Password",onChange:this.handleChange,value:this.state.password2})),o.a.createElement("input",{className:"login-button",type:"submit",value:"Sign Up",onClick:this.handleSignup}),o.a.createElement("br",null),o.a.createElement("h5",{className:"register-error"},this.state.error)),o.a.createElement(v.a,{to:"/",className:"goto-login signup"},"Have an account already? Login here"))}}]),t}(n.Component),w=a(13),k=a(34),S=a.n(k),N=(a(69),40),j=10*N,T=20*N,I=a(15),C=a(35),R=a.n(C),L=a(14),x={player:{name:"",title:"",description:"",uuid:"",error_msg:"",players:[]},initializing:!1,initialized:!1,error:null},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){default:return e;case"INITIALIZING":return Object.assign({},e,{initializing:!0});case"INITIALIZED":return Object.assign({},e,{initialized:!0,initializing:!1,player:t.payload});case"MOVE":return Object.assign({},e,{player:t.payload});case"ERROR":return console.log("ERROR"),Object.assign({},e,{error:t.payload})}},P={position:[320,320],spriteLocation:"0px 0px",direction:"east",walkIndex:0},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_PLAYER":return Object(I.a)({},t.payload);default:return e}},H={tiles:[]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TILES":return Object(I.a)({},t.payload);default:return e}},U=a(36),W=a(37),M=a.n(W),G=Object(L.c)({play:A,character:D,map:z}),_=Object(L.e)(G,Object(L.d)(Object(L.a)(U.a,M.a)));var V=Object(w.b)(function(e){return Object(I.a)({},e.character)})(function(e){var t=function(e,t){switch(e){case"SOUTH":return"".concat(N*t,"px ").concat(0*N,"px");case"EAST":return"".concat(N*t,"px ").concat(1*N,"px");case"WEST":return"".concat(N*t,"px ").concat(2*N,"px");case"NORTH":return"".concat(N*t,"px ").concat(3*N,"px");default:console.log("NORTHWEST...ERROR")}},a=function(e,a){var n=function(){var e=_.getState().character.walkIndex;return e>=7?0:e+1}();_.dispatch({type:"MOVE_PLAYER",payload:{position:a,direction:e,walkIndex:n,spriteLocation:t(e,n)}})},n=function(e){var t=_.getState().character.position,n=function(e,t){switch(t){case"WEST":return[e[0]-N,e[1]];case"EAST":return[e[0]+N,e[1]];case"NORTH":return[e[0],e[1]-N];case"SOUTH":return[e[0],e[1]+N];default:console.log("GET NEW POSITION NOT GOT")}}(t,e);(function(e,t){return t[0]>=0&&t[0]<=T-N&&t[1]>=0&&t[1]<=j-N})(0,n)&&function(e,t){var a=_.getState().map.tiles,n=t[1]/N,o=t[0]/N;return a[n][o]<5}(0,n)&&a(e,n)};return window.addEventListener("keydown",function(e){!function(e){switch(e.keyCode){case 37:return console.log("HERE",_.getState().character.position),console.log("TOO",_.getState().play.player.title),console.log("TOO",_.getState().play.player.description),n("WEST");case 38:return console.log("HERE",_.getState().character.position),console.log("TOO",_.getState().play.player.title),console.log("TOO",_.getState().play.player.description),n("NORTH");case 39:return console.log("HERE",_.getState().character.position),console.log("TOO",_.getState().play.player.title),console.log("TOO",_.getState().play.player.description),n("EAST");case 40:console.log("HERE",_.getState().character.position),console.log("TOO",_.getState().play.player.title),console.log("TOO",_.getState().play.player.description),n("SOUTH")}}(e)}),e}(function(e){return o.a.createElement("div",{style:{position:"absolute",top:e.position[1],left:e.position[0],backgroundImage:"url('".concat(R.a,"')"),backgroundPosition:e.spriteLocation,width:"40px",height:"40px"}})})),Z=function(e){switch(e){case 0:return"grass";case 3:return"tree";case 4:return"chest";case 5:return"rock";case 6:return"tree";case 7:return"npc";case 8:return"water";case 9:return"light";default:console.log("GET TILE SPRITE NOT GOTTEN")}},B=function(e){return o.a.createElement("div",{className:"tile ".concat(Z(e.tile)),style:{height:N,width:N}})},J=function(e){return o.a.createElement("div",{className:"row",style:{height:N}},e.tiles.map(function(e,t){return o.a.createElement(B,{key:t,tile:e})}))},Y=Object(w.b)(function(e){return{tiles:e.map.tiles}})(function(e){return o.a.createElement("div",{style:{position:"relative",top:"0px",left:"0px",width:"55%",height:"400px",border:"4px solid white",display:"inline-block",color:"white",marginRight:"1%",background:"sienna"}},e.tiles.map(function(e,t){return o.a.createElement(J,{key:t,tiles:e})}),o.a.createElement(V,null))}),Q=[[6,6,6,6,6,6,6,9,9,6,6,6,6,6,6,6,6],[6,0,6,6,6,6,6,0,0,6,6,6,6,7,4,7,6],[6,0,7,6,6,6,6,0,0,6,6,6,6,7,0,7,6],[6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,6],[6,0,0,6,6,6,6,0,0,6,6,6,6,0,0,7,6],[6,0,0,5,5,5,5,0,0,5,5,5,5,0,0,0,6],[6,0,7,5,5,5,5,0,0,5,5,5,5,6,6,6,6],[6,7,0,5,5,5,5,0,0,5,5,5,5,6,6,6,6],[6,5,5,5,5,5,5,0,0,5,5,5,5,5,5,5,6],[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]],X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(){localStorage.removeItem("key"),window.location.reload()},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.move=function(e){a.props.move(e)},a.handleCommandChoice=function(e){e.preventDefault();var t=document.getElementById("sel").value,n=a.state.message,o="Token "+localStorage.getItem("key");switch(a.setState({message:""}),t){case"say":f.a.post("https://lambda-adv-mud.herokuapp.com/api/adv/say/",{message:n},{headers:{Authorization:o,"Content-Type":"application/json"}}).then(function(e){console.log("say",e.data)}).catch(function(e){console.log(e)});break;case"shout":f.a.post("https://lambda-adv-mud.herokuapp.com/api/adv/shout/",{message:n},{headers:{Authorization:o,"Content-Type":"application/json"}}).then(function(e){console.log("shout",e.data)}).catch(function(e){console.log(e)});break;default:console.log("error?")}},a.state={message:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialize(),_.dispatch({type:"ADD_TILES",payload:{tiles:Q}}),document.body.classList.add("new-image")}},{key:"render",value:function(){return o.a.createElement("div",{className:"play-container"},o.a.createElement("div",{className:"play"},o.a.createElement("div",{className:"hud"},o.a.createElement("div",{className:"players"},o.a.createElement("div",{className:"player-name"},o.a.createElement("p",null,"Player: ",this.props.playerInfo.player.name),o.a.createElement("p",null,"HP: 100"),o.a.createElement("p",null,"XP: 200")),o.a.createElement("div",{className:"room-players"},"Players In Room: ",this.props.playerInfo.player.players.map(function(e,t){return o.a.createElement("p",{key:t},e)}))),o.a.createElement("div",{className:"player-location"},o.a.createElement("h3",{className:"loc-name"},this.props.playerInfo.player.title),o.a.createElement("h4",{className:"loc-description"},this.props.playerInfo.player.description),o.a.createElement("h5",{className:"error-msg"},this.props.playerInfo.player.error_msg)),o.a.createElement("div",{className:"control-center"},o.a.createElement("form",{id:"action-form",onSubmit:this.handleCommandChoice},o.a.createElement("input",{className:"message-input",name:"message",onChange:this.handleChange,placeholder:"Enter a message...",value:this.state.message,autoComplete:"off"}),o.a.createElement("select",{form:"action-form",id:"sel"},o.a.createElement("option",{value:"say"},"Say"),o.a.createElement("option",{value:"shout"},"Shout"))),o.a.createElement("div",{className:"player-nav"},o.a.createElement("button",{direction:"n",className:"but-n",onClick:this.move},"\u25b2"),o.a.createElement("button",{direction:"w",onClick:this.move},"\u25c0"),o.a.createElement("button",null,"\u25cf"),o.a.createElement("button",{direction:"e",onClick:this.move},"\u25b6"),o.a.createElement("button",{direction:"s",onClick:this.move},"\u25bc")))),o.a.createElement(Y,null)),o.a.createElement("button",{className:"logout",onClick:this.handleLogout},"Logout"))}}]),t}(n.Component),$=Object(w.b)(function(e,t){return{playerInfo:e.play}},{initialize:function(){var e=new S.a("edd377db6931e48605bb",{cluster:"us2",forceTLS:!0}),t="Token "+localStorage.getItem("key"),a=f.a.get("https://lambda-adv-mud.herokuapp.com/api/adv/init",{headers:{Authorization:t}});return function(t){t({type:"INITIALIZING"}),a.then(function(a){t({type:"INITIALIZED",payload:a.data});var n="p-channel-"+a.data.uuid;e.subscribe(n).bind("broadcast",function(e){console.log("DATA",JSON.stringify(e)),alert(e.message)})}).catch(function(e){t({type:"ERROR",payload:e})})}},move:function(e){var t=e.target.getAttribute("direction"),a="Token "+localStorage.getItem("key"),n=f.a.post("https://lambda-adv-mud.herokuapp.com/api/adv/move/",{direction:t},{headers:{Authorization:a,"Content-Type":"application/json"}});return function(e){n.then(function(t){e({type:"MOVE",payload:t.data})}).catch(function(t){e({type:"ERROR",payload:t})})}}})(E(X)),q=a(38),F=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(q.a,{exact:!0,path:"/",component:b}),o.a.createElement(q.a,{exact:!0,path:"/register",component:O}),o.a.createElement(q.a,{exact:!0,path:"/play",component:$}))}}]),t}(n.Component),K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var te=a(71);c.a.render(o.a.createElement(w.a,{store:_},o.a.createElement(te.a,null,o.a.createElement(F,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");K?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ee(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ee(e)})}}()}},[[39,1,2]]]);
//# sourceMappingURL=main.f704bd97.chunk.js.map